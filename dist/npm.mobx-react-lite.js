/*! For license information please see npm.mobx-react-lite.js.LICENSE.txt */
"use strict";(self.webpackChunkfonk_input=self.webpackChunkfonk_input||[]).push([["npm.mobx-react-lite"],{"./node_modules/mobx-react-lite/es/ObserverComponent.js":(e,r,t)=>{t.r(r),t.d(r,{Observer:()=>o});var n=t("./node_modules/mobx-react-lite/es/useObserver.js");function o(e){var r=e.children,t=e.render,o=r||t;return"function"!=typeof o?null:(0,n.useObserver)(o)}function s(e,r,t,n,o){var s="children"===r?"render":"children",a="function"==typeof e[r],i="function"==typeof e[s];return a&&i?new Error("MobX Observer: Do not use children and render in the same time in`"+t):a||i?null:new Error("Invalid prop `"+o+"` of type `"+typeof e[r]+"` supplied to `"+t+"`, expected `function`.")}o.propTypes={children:s,render:s},o.displayName="Observer"},"./node_modules/mobx-react-lite/es/index.js":(e,r,t)=>{t.r(r),t.d(r,{isUsingStaticRendering:()=>i.isUsingStaticRendering,enableStaticRendering:()=>i.enableStaticRendering,observer:()=>u.observer,Observer:()=>c.Observer,useLocalObservable:()=>l.useLocalObservable,useLocalStore:()=>d.useLocalStore,useAsObservableSource:()=>m.useAsObservableSource,clearTimers:()=>b.resetCleanupScheduleForTests,useObserver:()=>f,isObserverBatched:()=>o.isObserverBatched,observerBatching:()=>o.observerBatching,useStaticRendering:()=>v});t("./node_modules/mobx-react-lite/es/utils/assertEnvironment.js");var n=t("./node_modules/mobx-react-lite/es/utils/reactBatchedUpdates.js"),o=t("./node_modules/mobx-react-lite/es/utils/observerBatching.js"),s=t("./node_modules/mobx-react-lite/es/utils/utils.js"),a=t("./node_modules/mobx-react-lite/es/useObserver.js"),i=t("./node_modules/mobx-react-lite/es/staticRendering.js"),u=t("./node_modules/mobx-react-lite/es/observer.js"),c=t("./node_modules/mobx-react-lite/es/ObserverComponent.js"),l=t("./node_modules/mobx-react-lite/es/useLocalObservable.js"),d=t("./node_modules/mobx-react-lite/es/useLocalStore.js"),m=t("./node_modules/mobx-react-lite/es/useAsObservableSource.js"),b=t("./node_modules/mobx-react-lite/es/utils/reactionCleanupTracking.js");function f(e,r){return void 0===r&&(r="observed"),(0,s.useDeprecated)("[mobx-react-lite] 'useObserver(fn)' is deprecated. Use `<Observer>{fn}</Observer>` instead, or wrap the entire component in `observer`."),(0,a.useObserver)(e,r)}function v(e){console.warn("[mobx-react-lite] 'useStaticRendering' is deprecated, use 'enableStaticRendering' instead"),(0,i.enableStaticRendering)(e)}(0,o.observerBatching)(n.unstable_batchedUpdates)},"./node_modules/mobx-react-lite/es/observer.js":(e,r,t)=>{t.r(r),t.d(r,{observer:()=>i});var n=t("./node_modules/react/index.js"),o=t("./node_modules/mobx-react-lite/es/staticRendering.js"),s=t("./node_modules/mobx-react-lite/es/useObserver.js"),a=function(){return(a=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};function i(e,r){if((0,o.isUsingStaticRendering)())return e;var t,i,c,l=a({forwardRef:!1},r),d=e.displayName||e.name,m=function(r,t){return(0,s.useObserver)((function(){return e(r,t)}),d)};return m.displayName=d,t=l.forwardRef?(0,n.memo)((0,n.forwardRef)(m)):(0,n.memo)(m),i=e,c=t,Object.keys(i).forEach((function(e){u[e]||Object.defineProperty(c,e,Object.getOwnPropertyDescriptor(i,e))})),t.displayName=d,t}var u={$$typeof:!0,render:!0,compare:!0,type:!0}},"./node_modules/mobx-react-lite/es/staticRendering.js":(e,r,t)=>{t.r(r),t.d(r,{enableStaticRendering:()=>o,isUsingStaticRendering:()=>s});var n=!1;function o(e){n=e}function s(){return n}},"./node_modules/mobx-react-lite/es/useAsObservableSource.js":(e,r,t)=>{t.r(r),t.d(r,{useAsObservableSource:()=>i});var n=t("./node_modules/mobx-react-lite/es/utils/utils.js"),o=t("./node_modules/mobx/dist/mobx.esm.js"),s=t("./node_modules/react/index.js"),a=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,s=t.call(e),a=[];try{for(;(void 0===r||r-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=s.return)&&t.call(s)}finally{if(o)throw o.error}}return a};function i(e){(0,n.useDeprecated)("[mobx-react-lite] 'useAsObservableSource' is deprecated, please store the values directly in an observable, for example by using 'useLocalObservable', and sync future updates using 'useEffect' when needed. See the README for examples.");var r=a((0,s.useState)((function(){return(0,o.observable)(e,{},{deep:!1})})),1)[0];return(0,o.runInAction)((function(){Object.assign(r,e)})),r}},"./node_modules/mobx-react-lite/es/useLocalObservable.js":(e,r,t)=>{t.r(r),t.d(r,{useLocalObservable:()=>s});var n=t("./node_modules/mobx/dist/mobx.esm.js"),o=t("./node_modules/react/index.js");function s(e,r){return(0,o.useState)((function(){return(0,n.observable)(e(),r,{autoBind:!0})}))[0]}},"./node_modules/mobx-react-lite/es/useLocalStore.js":(e,r,t)=>{t.r(r),t.d(r,{useLocalStore:()=>i});var n=t("./node_modules/mobx/dist/mobx.esm.js"),o=t("./node_modules/react/index.js"),s=t("./node_modules/mobx-react-lite/es/utils/utils.js"),a=t("./node_modules/mobx-react-lite/es/useAsObservableSource.js");function i(e,r){(0,s.useDeprecated)("[mobx-react-lite] 'useLocalStore' is deprecated, use 'useLocalObservable' instead.");var t=r&&(0,a.useAsObservableSource)(r);return(0,o.useState)((function(){return(0,n.observable)(e(t),void 0,{autoBind:!0})}))[0]}},"./node_modules/mobx-react-lite/es/useObserver.js":(e,r,t)=>{t.r(r),t.d(r,{useObserver:()=>m});var n=t("./node_modules/mobx/dist/mobx.esm.js"),o=t("./node_modules/react/index.js"),s=t("./node_modules/mobx-react-lite/es/utils/printDebugValue.js"),a=t("./node_modules/mobx-react-lite/es/utils/reactionCleanupTracking.js"),i=t("./node_modules/mobx-react-lite/es/staticRendering.js"),u=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,s=t.call(e),a=[];try{for(;(void 0===r||r-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=s.return)&&t.call(s)}finally{if(o)throw o.error}}return a};function c(e){return"observer"+e}var l=function(){};function d(){return new l}function m(e,r){if(void 0===r&&(r="observed"),(0,i.isUsingStaticRendering)())return e();var t=u(o.useState(d),1)[0],l=u(o.useState(),2)[1],m=function(){return l([])},b=o.useRef(null);if(!b.current)var f=new n.Reaction(c(r),(function(){v.mounted?m():v.changedBeforeMount=!0})),v=(0,a.addReactionToTrack)(b,f,t);var p,g,x=b.current.reaction;if(o.useDebugValue(x,s.printDebugValue),o.useEffect((function(){return(0,a.recordReactionAsCommitted)(b),b.current?(b.current.mounted=!0,b.current.changedBeforeMount&&(b.current.changedBeforeMount=!1,m())):(b.current={reaction:new n.Reaction(c(r),(function(){m()})),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},m()),function(){b.current.reaction.dispose(),b.current=null}}),[]),x.track((function(){try{p=e()}catch(e){g=e}})),g)throw g;return p}},"./node_modules/mobx-react-lite/es/utils/FinalizationRegistryWrapper.js":(e,r,t)=>{t.r(r),t.d(r,{FinalizationRegistry:()=>n});var n="undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry},"./node_modules/mobx-react-lite/es/utils/assertEnvironment.js":(e,r,t)=>{t.r(r);var n=t("./node_modules/mobx/dist/mobx.esm.js");if(!t("./node_modules/react/index.js").useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!n.makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available")},"./node_modules/mobx-react-lite/es/utils/createReactionCleanupTrackingUsingFinalizationRegister.js":(e,r,t)=>{t.r(r),t.d(r,{createReactionCleanupTrackingUsingFinalizationRegister:()=>o});var n=t("./node_modules/mobx-react-lite/es/utils/reactionCleanupTrackingCommon.js");function o(e){var r=new Map,t=1,o=new e((function(e){var t=r.get(e);t&&(t.reaction.dispose(),r.delete(e))}));return{addReactionToTrack:function(e,s,a){var i=t++;return o.register(a,i,e),e.current=(0,n.createTrackingData)(s),e.current.finalizationRegistryCleanupToken=i,r.set(i,e.current),e.current},recordReactionAsCommitted:function(e){o.unregister(e),e.current&&e.current.finalizationRegistryCleanupToken&&r.delete(e.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}},"./node_modules/mobx-react-lite/es/utils/createTimerBasedReactionCleanupTracking.js":(e,r,t)=>{t.r(r),t.d(r,{createTimerBasedReactionCleanupTracking:()=>s});var n=t("./node_modules/mobx-react-lite/es/utils/reactionCleanupTrackingCommon.js"),o=function(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};function s(){var e,r=new Set;function t(){void 0===e&&(e=setTimeout(s,n.CLEANUP_TIMER_LOOP_MILLIS))}function s(){e=void 0;var n=Date.now();r.forEach((function(e){var t=e.current;t&&n>=t.cleanAt&&(t.reaction.dispose(),e.current=null,r.delete(e))})),r.size>0&&t()}return{addReactionToTrack:function(e,o,s){var a;return e.current=(0,n.createTrackingData)(o),a=e,r.add(a),t(),e.current},recordReactionAsCommitted:function(e){r.delete(e)},forceCleanupTimerToRunNowForTests:function(){e&&(clearTimeout(e),s())},resetCleanupScheduleForTests:function(){var t,n;if(r.size>0){try{for(var s=o(r),a=s.next();!a.done;a=s.next()){var i=a.value,u=i.current;u&&(u.reaction.dispose(),i.current=null)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}r.clear()}e&&(clearTimeout(e),e=void 0)}}}},"./node_modules/mobx-react-lite/es/utils/observerBatching.js":(e,r,t)=>{t.r(r),t.d(r,{defaultNoopBatch:()=>o,observerBatching:()=>s,isObserverBatched:()=>a});var n=t("./node_modules/mobx/dist/mobx.esm.js");function o(e){e()}function s(e){e||(e=o,console.warn("[MobX] Failed to get unstable_batched updates from react-dom / react-native")),(0,n.configure)({reactionScheduler:e})}var a=function(){return console.warn("[MobX] Deprecated"),!0}},"./node_modules/mobx-react-lite/es/utils/printDebugValue.js":(e,r,t)=>{t.r(r),t.d(r,{printDebugValue:()=>o});var n=t("./node_modules/mobx/dist/mobx.esm.js");function o(e){return(0,n.getDependencyTree)(e)}},"./node_modules/mobx-react-lite/es/utils/reactBatchedUpdates.js":(e,r,t)=>{t.r(r),t.d(r,{unstable_batchedUpdates:()=>n.unstable_batchedUpdates});var n=t("./node_modules/react-dom/index.js")},"./node_modules/mobx-react-lite/es/utils/reactionCleanupTracking.js":(e,r,t)=>{t.r(r),t.d(r,{addReactionToTrack:()=>i,recordReactionAsCommitted:()=>u,resetCleanupScheduleForTests:()=>c,forceCleanupTimerToRunNowForTests:()=>l});var n=t("./node_modules/mobx-react-lite/es/utils/FinalizationRegistryWrapper.js"),o=t("./node_modules/mobx-react-lite/es/utils/createReactionCleanupTrackingUsingFinalizationRegister.js"),s=t("./node_modules/mobx-react-lite/es/utils/createTimerBasedReactionCleanupTracking.js"),a=n.FinalizationRegistry?(0,o.createReactionCleanupTrackingUsingFinalizationRegister)(n.FinalizationRegistry):(0,s.createTimerBasedReactionCleanupTracking)(),i=a.addReactionToTrack,u=a.recordReactionAsCommitted,c=a.resetCleanupScheduleForTests,l=a.forceCleanupTimerToRunNowForTests},"./node_modules/mobx-react-lite/es/utils/reactionCleanupTrackingCommon.js":(e,r,t)=>{function n(e){return{reaction:e,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+o}}t.r(r),t.d(r,{createTrackingData:()=>n,CLEANUP_LEAKED_REACTIONS_AFTER_MILLIS:()=>o,CLEANUP_TIMER_LOOP_MILLIS:()=>s});var o=1e4,s=1e4},"./node_modules/mobx-react-lite/es/utils/utils.js":(e,r,t)=>{t.r(r),t.d(r,{useDeprecated:()=>o});var n=[];function o(e){n.includes(e)||(n.push(e),console.warn(e))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YnBhY2s6Ly9mb25rX2lucHV0Ly4vbm9kZV9tb2R1bGVzL21vYngtcmVhY3QtbGl0ZS9lcy9PYnNlcnZlckNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly9mb25rX2lucHV0Ly4vbm9kZV9tb2R1bGVzL21vYngtcmVhY3QtbGl0ZS9lcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9mb25rX2lucHV0Ly4vbm9kZV9tb2R1bGVzL21vYngtcmVhY3QtbGl0ZS9lcy9vYnNlcnZlci5qcyIsIndlYnBhY2s6Ly9mb25rX2lucHV0Ly4vbm9kZV9tb2R1bGVzL21vYngtcmVhY3QtbGl0ZS9lcy9zdGF0aWNSZW5kZXJpbmcuanMiLCJ3ZWJwYWNrOi8vZm9ua19pbnB1dC8uL25vZGVfbW9kdWxlcy9tb2J4LXJlYWN0LWxpdGUvZXMvdXNlQXNPYnNlcnZhYmxlU291cmNlLmpzIiwid2VicGFjazovL2ZvbmtfaW5wdXQvLi9ub2RlX21vZHVsZXMvbW9ieC1yZWFjdC1saXRlL2VzL3VzZUxvY2FsT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly9mb25rX2lucHV0Ly4vbm9kZV9tb2R1bGVzL21vYngtcmVhY3QtbGl0ZS9lcy91c2VMb2NhbFN0b3JlLmpzIiwid2VicGFjazovL2ZvbmtfaW5wdXQvLi9ub2RlX21vZHVsZXMvbW9ieC1yZWFjdC1saXRlL2VzL3VzZU9ic2VydmVyLmpzIiwid2VicGFjazovL2ZvbmtfaW5wdXQvLi9ub2RlX21vZHVsZXMvbW9ieC1yZWFjdC1saXRlL2VzL3V0aWxzL0ZpbmFsaXphdGlvblJlZ2lzdHJ5V3JhcHBlci5qcyIsIndlYnBhY2s6Ly9mb25rX2lucHV0Ly4vbm9kZV9tb2R1bGVzL21vYngtcmVhY3QtbGl0ZS9lcy91dGlscy9hc3NlcnRFbnZpcm9ubWVudC5qcyIsIndlYnBhY2s6Ly9mb25rX2lucHV0Ly4vbm9kZV9tb2R1bGVzL21vYngtcmVhY3QtbGl0ZS9lcy91dGlscy9jcmVhdGVSZWFjdGlvbkNsZWFudXBUcmFja2luZ1VzaW5nRmluYWxpemF0aW9uUmVnaXN0ZXIuanMiLCJ3ZWJwYWNrOi8vZm9ua19pbnB1dC8uL25vZGVfbW9kdWxlcy9tb2J4LXJlYWN0LWxpdGUvZXMvdXRpbHMvY3JlYXRlVGltZXJCYXNlZFJlYWN0aW9uQ2xlYW51cFRyYWNraW5nLmpzIiwid2VicGFjazovL2ZvbmtfaW5wdXQvLi9ub2RlX21vZHVsZXMvbW9ieC1yZWFjdC1saXRlL2VzL3V0aWxzL29ic2VydmVyQmF0Y2hpbmcuanMiLCJ3ZWJwYWNrOi8vZm9ua19pbnB1dC8uL25vZGVfbW9kdWxlcy9tb2J4LXJlYWN0LWxpdGUvZXMvdXRpbHMvcHJpbnREZWJ1Z1ZhbHVlLmpzIiwid2VicGFjazovL2ZvbmtfaW5wdXQvLi9ub2RlX21vZHVsZXMvbW9ieC1yZWFjdC1saXRlL2VzL3V0aWxzL3JlYWN0aW9uQ2xlYW51cFRyYWNraW5nLmpzIiwid2VicGFjazovL2ZvbmtfaW5wdXQvLi9ub2RlX21vZHVsZXMvbW9ieC1yZWFjdC1saXRlL2VzL3V0aWxzL3JlYWN0aW9uQ2xlYW51cFRyYWNraW5nQ29tbW9uLmpzIiwid2VicGFjazovL2ZvbmtfaW5wdXQvLi9ub2RlX21vZHVsZXMvbW9ieC1yZWFjdC1saXRlL2VzL3V0aWxzL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZU9ic2VydmVyIH0gZnJvbSBcIi4vdXNlT2JzZXJ2ZXJcIjtcbmZ1bmN0aW9uIE9ic2VydmVyQ29tcG9uZW50KF9hKSB7XG4gICAgdmFyIGNoaWxkcmVuID0gX2EuY2hpbGRyZW4sIHJlbmRlciA9IF9hLnJlbmRlcjtcbiAgICB2YXIgY29tcG9uZW50ID0gY2hpbGRyZW4gfHwgcmVuZGVyO1xuICAgIGlmICh0eXBlb2YgY29tcG9uZW50ICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB1c2VPYnNlcnZlcihjb21wb25lbnQpO1xufVxuaWYgKFwicHJvZHVjdGlvblwiICE9PSBwcm9jZXNzLmVudi5OT0RFX0VOVikge1xuICAgIE9ic2VydmVyQ29tcG9uZW50LnByb3BUeXBlcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IE9ic2VydmVyUHJvcHNDaGVjayxcbiAgICAgICAgcmVuZGVyOiBPYnNlcnZlclByb3BzQ2hlY2tcbiAgICB9O1xufVxuT2JzZXJ2ZXJDb21wb25lbnQuZGlzcGxheU5hbWUgPSBcIk9ic2VydmVyXCI7XG5leHBvcnQgeyBPYnNlcnZlckNvbXBvbmVudCBhcyBPYnNlcnZlciB9O1xuZnVuY3Rpb24gT2JzZXJ2ZXJQcm9wc0NoZWNrKHByb3BzLCBrZXksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgZXh0cmFLZXkgPSBrZXkgPT09IFwiY2hpbGRyZW5cIiA/IFwicmVuZGVyXCIgOiBcImNoaWxkcmVuXCI7XG4gICAgdmFyIGhhc1Byb3AgPSB0eXBlb2YgcHJvcHNba2V5XSA9PT0gXCJmdW5jdGlvblwiO1xuICAgIHZhciBoYXNFeHRyYVByb3AgPSB0eXBlb2YgcHJvcHNbZXh0cmFLZXldID09PSBcImZ1bmN0aW9uXCI7XG4gICAgaWYgKGhhc1Byb3AgJiYgaGFzRXh0cmFQcm9wKSB7XG4gICAgICAgIHJldHVybiBuZXcgRXJyb3IoXCJNb2JYIE9ic2VydmVyOiBEbyBub3QgdXNlIGNoaWxkcmVuIGFuZCByZW5kZXIgaW4gdGhlIHNhbWUgdGltZSBpbmBcIiArIGNvbXBvbmVudE5hbWUpO1xuICAgIH1cbiAgICBpZiAoaGFzUHJvcCB8fCBoYXNFeHRyYVByb3ApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBuZXcgRXJyb3IoXCJJbnZhbGlkIHByb3AgYFwiICtcbiAgICAgICAgcHJvcEZ1bGxOYW1lICtcbiAgICAgICAgXCJgIG9mIHR5cGUgYFwiICtcbiAgICAgICAgdHlwZW9mIHByb3BzW2tleV0gK1xuICAgICAgICBcImAgc3VwcGxpZWQgdG9cIiArXG4gICAgICAgIFwiIGBcIiArXG4gICAgICAgIGNvbXBvbmVudE5hbWUgK1xuICAgICAgICBcImAsIGV4cGVjdGVkIGBmdW5jdGlvbmAuXCIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JzZXJ2ZXJDb21wb25lbnQuanMubWFwIiwiaW1wb3J0IFwiLi91dGlscy9hc3NlcnRFbnZpcm9ubWVudFwiO1xuaW1wb3J0IHsgdW5zdGFibGVfYmF0Y2hlZFVwZGF0ZXMgYXMgYmF0Y2ggfSBmcm9tIFwiLi91dGlscy9yZWFjdEJhdGNoZWRVcGRhdGVzXCI7XG5pbXBvcnQgeyBvYnNlcnZlckJhdGNoaW5nIH0gZnJvbSBcIi4vdXRpbHMvb2JzZXJ2ZXJCYXRjaGluZ1wiO1xuaW1wb3J0IHsgdXNlRGVwcmVjYXRlZCB9IGZyb20gXCIuL3V0aWxzL3V0aWxzXCI7XG5pbXBvcnQgeyB1c2VPYnNlcnZlciBhcyB1c2VPYnNlcnZlck9yaWdpbmFsIH0gZnJvbSBcIi4vdXNlT2JzZXJ2ZXJcIjtcbmltcG9ydCB7IGVuYWJsZVN0YXRpY1JlbmRlcmluZyB9IGZyb20gXCIuL3N0YXRpY1JlbmRlcmluZ1wiO1xub2JzZXJ2ZXJCYXRjaGluZyhiYXRjaCk7XG5leHBvcnQgeyBpc1VzaW5nU3RhdGljUmVuZGVyaW5nLCBlbmFibGVTdGF0aWNSZW5kZXJpbmcgfSBmcm9tIFwiLi9zdGF0aWNSZW5kZXJpbmdcIjtcbmV4cG9ydCB7IG9ic2VydmVyIH0gZnJvbSBcIi4vb2JzZXJ2ZXJcIjtcbmV4cG9ydCB7IE9ic2VydmVyIH0gZnJvbSBcIi4vT2JzZXJ2ZXJDb21wb25lbnRcIjtcbmV4cG9ydCB7IHVzZUxvY2FsT2JzZXJ2YWJsZSB9IGZyb20gXCIuL3VzZUxvY2FsT2JzZXJ2YWJsZVwiO1xuZXhwb3J0IHsgdXNlTG9jYWxTdG9yZSB9IGZyb20gXCIuL3VzZUxvY2FsU3RvcmVcIjtcbmV4cG9ydCB7IHVzZUFzT2JzZXJ2YWJsZVNvdXJjZSB9IGZyb20gXCIuL3VzZUFzT2JzZXJ2YWJsZVNvdXJjZVwiO1xuZXhwb3J0IHsgcmVzZXRDbGVhbnVwU2NoZWR1bGVGb3JUZXN0cyBhcyBjbGVhclRpbWVycyB9IGZyb20gXCIuL3V0aWxzL3JlYWN0aW9uQ2xlYW51cFRyYWNraW5nXCI7XG5leHBvcnQgZnVuY3Rpb24gdXNlT2JzZXJ2ZXIoZm4sIGJhc2VDb21wb25lbnROYW1lKSB7XG4gICAgaWYgKGJhc2VDb21wb25lbnROYW1lID09PSB2b2lkIDApIHsgYmFzZUNvbXBvbmVudE5hbWUgPSBcIm9ic2VydmVkXCI7IH1cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WKSB7XG4gICAgICAgIHVzZURlcHJlY2F0ZWQoXCJbbW9ieC1yZWFjdC1saXRlXSAndXNlT2JzZXJ2ZXIoZm4pJyBpcyBkZXByZWNhdGVkLiBVc2UgYDxPYnNlcnZlcj57Zm59PC9PYnNlcnZlcj5gIGluc3RlYWQsIG9yIHdyYXAgdGhlIGVudGlyZSBjb21wb25lbnQgaW4gYG9ic2VydmVyYC5cIik7XG4gICAgfVxuICAgIHJldHVybiB1c2VPYnNlcnZlck9yaWdpbmFsKGZuLCBiYXNlQ29tcG9uZW50TmFtZSk7XG59XG5leHBvcnQgeyBpc09ic2VydmVyQmF0Y2hlZCwgb2JzZXJ2ZXJCYXRjaGluZyB9IGZyb20gXCIuL3V0aWxzL29ic2VydmVyQmF0Y2hpbmdcIjtcbmV4cG9ydCBmdW5jdGlvbiB1c2VTdGF0aWNSZW5kZXJpbmcoZW5hYmxlKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSBwcm9jZXNzLmVudi5OT0RFX0VOVikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJbbW9ieC1yZWFjdC1saXRlXSAndXNlU3RhdGljUmVuZGVyaW5nJyBpcyBkZXByZWNhdGVkLCB1c2UgJ2VuYWJsZVN0YXRpY1JlbmRlcmluZycgaW5zdGVhZFwiKTtcbiAgICB9XG4gICAgZW5hYmxlU3RhdGljUmVuZGVyaW5nKGVuYWJsZSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJ2YXIgX19hc3NpZ24gPSAodGhpcyAmJiB0aGlzLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuaW1wb3J0IHsgZm9yd2FyZFJlZiwgbWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgaXNVc2luZ1N0YXRpY1JlbmRlcmluZyB9IGZyb20gXCIuL3N0YXRpY1JlbmRlcmluZ1wiO1xuaW1wb3J0IHsgdXNlT2JzZXJ2ZXIgfSBmcm9tIFwiLi91c2VPYnNlcnZlclwiO1xuLy8gbi5iLiBiYXNlIGNhc2UgaXMgbm90IHVzZWQgZm9yIGFjdHVhbCB0eXBpbmdzIG9yIGV4cG9ydGVkIGluIHRoZSB0eXBpbmcgZmlsZXNcbmV4cG9ydCBmdW5jdGlvbiBvYnNlcnZlcihiYXNlQ29tcG9uZW50LCBvcHRpb25zKSB7XG4gICAgLy8gVGhlIHdvcmtpbmcgb2Ygb2JzZXJ2ZXIgaXMgZXhwbGFpbmVkIHN0ZXAgYnkgc3RlcCBpbiB0aGlzIHRhbGs6IGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9Y1BGNGlCZWRvRjAmZmVhdHVyZT15b3V0dS5iZSZ0PTEzMDdcbiAgICBpZiAoaXNVc2luZ1N0YXRpY1JlbmRlcmluZygpKSB7XG4gICAgICAgIHJldHVybiBiYXNlQ29tcG9uZW50O1xuICAgIH1cbiAgICB2YXIgcmVhbE9wdGlvbnMgPSBfX2Fzc2lnbih7IGZvcndhcmRSZWY6IGZhbHNlIH0sIG9wdGlvbnMpO1xuICAgIHZhciBiYXNlQ29tcG9uZW50TmFtZSA9IGJhc2VDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgYmFzZUNvbXBvbmVudC5uYW1lO1xuICAgIHZhciB3cmFwcGVkQ29tcG9uZW50ID0gZnVuY3Rpb24gKHByb3BzLCByZWYpIHtcbiAgICAgICAgcmV0dXJuIHVzZU9ic2VydmVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGJhc2VDb21wb25lbnQocHJvcHMsIHJlZik7IH0sIGJhc2VDb21wb25lbnROYW1lKTtcbiAgICB9O1xuICAgIHdyYXBwZWRDb21wb25lbnQuZGlzcGxheU5hbWUgPSBiYXNlQ29tcG9uZW50TmFtZTtcbiAgICAvLyBtZW1vOyB3ZSBhcmUgbm90IGludGVyZXN0ZWQgaW4gZGVlcCB1cGRhdGVzXG4gICAgLy8gaW4gcHJvcHM7IHdlIGFzc3VtZSB0aGF0IGlmIGRlZXAgb2JqZWN0cyBhcmUgY2hhbmdlZCxcbiAgICAvLyB0aGlzIGlzIGluIG9ic2VydmFibGVzLCB3aGljaCB3b3VsZCBoYXZlIGJlZW4gdHJhY2tlZCBhbnl3YXlcbiAgICB2YXIgbWVtb0NvbXBvbmVudDtcbiAgICBpZiAocmVhbE9wdGlvbnMuZm9yd2FyZFJlZikge1xuICAgICAgICAvLyB3ZSBoYXZlIHRvIHVzZSBmb3J3YXJkUmVmIGhlcmUgYmVjYXVzZTpcbiAgICAgICAgLy8gMS4gaXQgY2Fubm90IGdvIGJlZm9yZSBtZW1vLCBvbmx5IGFmdGVyIGl0XG4gICAgICAgIC8vIDIuIGZvcndhcmRSZWYgY29udmVydHMgdGhlIGZ1bmN0aW9uIGludG8gYW4gYWN0dWFsIGNvbXBvbmVudCwgc28gd2UgY2FuJ3QgbGV0IHRoZSBiYXNlQ29tcG9uZW50IGRvIGl0XG4gICAgICAgIC8vICAgIHNpbmNlIGl0IHdvdWxkbid0IGJlIGEgY2FsbGFibGUgZnVuY3Rpb24gYW55bW9yZVxuICAgICAgICBtZW1vQ29tcG9uZW50ID0gbWVtbyhmb3J3YXJkUmVmKHdyYXBwZWRDb21wb25lbnQpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1lbW9Db21wb25lbnQgPSBtZW1vKHdyYXBwZWRDb21wb25lbnQpO1xuICAgIH1cbiAgICBjb3B5U3RhdGljUHJvcGVydGllcyhiYXNlQ29tcG9uZW50LCBtZW1vQ29tcG9uZW50KTtcbiAgICBtZW1vQ29tcG9uZW50LmRpc3BsYXlOYW1lID0gYmFzZUNvbXBvbmVudE5hbWU7XG4gICAgcmV0dXJuIG1lbW9Db21wb25lbnQ7XG59XG4vLyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vbXJpZGd3YXkvaG9pc3Qtbm9uLXJlYWN0LXN0YXRpY3MvYmxvYi9tYXN0ZXIvc3JjL2luZGV4LmpzXG52YXIgaG9pc3RCbGFja0xpc3QgPSB7XG4gICAgJCR0eXBlb2Y6IHRydWUsXG4gICAgcmVuZGVyOiB0cnVlLFxuICAgIGNvbXBhcmU6IHRydWUsXG4gICAgdHlwZTogdHJ1ZVxufTtcbmZ1bmN0aW9uIGNvcHlTdGF0aWNQcm9wZXJ0aWVzKGJhc2UsIHRhcmdldCkge1xuICAgIE9iamVjdC5rZXlzKGJhc2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAoIWhvaXN0QmxhY2tMaXN0W2tleV0pIHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiYXNlLCBrZXkpKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2ZXIuanMubWFwIiwidmFyIGdsb2JhbElzVXNpbmdTdGF0aWNSZW5kZXJpbmcgPSBmYWxzZTtcbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVTdGF0aWNSZW5kZXJpbmcoZW5hYmxlKSB7XG4gICAgZ2xvYmFsSXNVc2luZ1N0YXRpY1JlbmRlcmluZyA9IGVuYWJsZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1VzaW5nU3RhdGljUmVuZGVyaW5nKCkge1xuICAgIHJldHVybiBnbG9iYWxJc1VzaW5nU3RhdGljUmVuZGVyaW5nO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhdGljUmVuZGVyaW5nLmpzLm1hcCIsInZhciBfX3JlYWQgPSAodGhpcyAmJiB0aGlzLl9fcmVhZCkgfHwgZnVuY3Rpb24gKG8sIG4pIHtcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XG4gICAgaWYgKCFtKSByZXR1cm4gbztcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcbiAgICB0cnkge1xuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cbiAgICB9XG4gICAgcmV0dXJuIGFyO1xufTtcbmltcG9ydCB7IHVzZURlcHJlY2F0ZWQgfSBmcm9tIFwiLi91dGlscy91dGlsc1wiO1xuaW1wb3J0IHsgb2JzZXJ2YWJsZSwgcnVuSW5BY3Rpb24gfSBmcm9tIFwibW9ieFwiO1xuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmV4cG9ydCBmdW5jdGlvbiB1c2VBc09ic2VydmFibGVTb3VyY2UoY3VycmVudCkge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYpXG4gICAgICAgIHVzZURlcHJlY2F0ZWQoXCJbbW9ieC1yZWFjdC1saXRlXSAndXNlQXNPYnNlcnZhYmxlU291cmNlJyBpcyBkZXByZWNhdGVkLCBwbGVhc2Ugc3RvcmUgdGhlIHZhbHVlcyBkaXJlY3RseSBpbiBhbiBvYnNlcnZhYmxlLCBmb3IgZXhhbXBsZSBieSB1c2luZyAndXNlTG9jYWxPYnNlcnZhYmxlJywgYW5kIHN5bmMgZnV0dXJlIHVwZGF0ZXMgdXNpbmcgJ3VzZUVmZmVjdCcgd2hlbiBuZWVkZWQuIFNlZSB0aGUgUkVBRE1FIGZvciBleGFtcGxlcy5cIik7XG4gICAgdmFyIF9hID0gX19yZWFkKHVzZVN0YXRlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9ic2VydmFibGUoY3VycmVudCwge30sIHsgZGVlcDogZmFsc2UgfSk7IH0pLCAxKSwgcmVzID0gX2FbMF07XG4gICAgcnVuSW5BY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgICBPYmplY3QuYXNzaWduKHJlcywgY3VycmVudCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUFzT2JzZXJ2YWJsZVNvdXJjZS5qcy5tYXAiLCJpbXBvcnQgeyBvYnNlcnZhYmxlIH0gZnJvbSBcIm1vYnhcIjtcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5leHBvcnQgZnVuY3Rpb24gdXNlTG9jYWxPYnNlcnZhYmxlKGluaXRpYWxpemVyLCBhbm5vdGF0aW9ucykge1xuICAgIHJldHVybiB1c2VTdGF0ZShmdW5jdGlvbiAoKSB7IHJldHVybiBvYnNlcnZhYmxlKGluaXRpYWxpemVyKCksIGFubm90YXRpb25zLCB7IGF1dG9CaW5kOiB0cnVlIH0pOyB9KVswXTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUxvY2FsT2JzZXJ2YWJsZS5qcy5tYXAiLCJpbXBvcnQgeyBvYnNlcnZhYmxlIH0gZnJvbSBcIm1vYnhcIjtcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VEZXByZWNhdGVkIH0gZnJvbSBcIi4vdXRpbHMvdXRpbHNcIjtcbmltcG9ydCB7IHVzZUFzT2JzZXJ2YWJsZVNvdXJjZSB9IGZyb20gXCIuL3VzZUFzT2JzZXJ2YWJsZVNvdXJjZVwiO1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUxvY2FsU3RvcmUoaW5pdGlhbGl6ZXIsIGN1cnJlbnQpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WKVxuICAgICAgICB1c2VEZXByZWNhdGVkKFwiW21vYngtcmVhY3QtbGl0ZV0gJ3VzZUxvY2FsU3RvcmUnIGlzIGRlcHJlY2F0ZWQsIHVzZSAndXNlTG9jYWxPYnNlcnZhYmxlJyBpbnN0ZWFkLlwiKTtcbiAgICB2YXIgc291cmNlID0gY3VycmVudCAmJiB1c2VBc09ic2VydmFibGVTb3VyY2UoY3VycmVudCk7XG4gICAgcmV0dXJuIHVzZVN0YXRlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9ic2VydmFibGUoaW5pdGlhbGl6ZXIoc291cmNlKSwgdW5kZWZpbmVkLCB7IGF1dG9CaW5kOiB0cnVlIH0pOyB9KVswXTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVzZUxvY2FsU3RvcmUuanMubWFwIiwidmFyIF9fcmVhZCA9ICh0aGlzICYmIHRoaXMuX19yZWFkKSB8fCBmdW5jdGlvbiAobywgbikge1xuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcbiAgICBpZiAoIW0pIHJldHVybiBvO1xuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xuICAgIHRyeSB7XG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxuICAgIH1cbiAgICByZXR1cm4gYXI7XG59O1xuaW1wb3J0IHsgUmVhY3Rpb24gfSBmcm9tIFwibW9ieFwiO1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgcHJpbnREZWJ1Z1ZhbHVlIH0gZnJvbSBcIi4vdXRpbHMvcHJpbnREZWJ1Z1ZhbHVlXCI7XG5pbXBvcnQgeyBhZGRSZWFjdGlvblRvVHJhY2ssIHJlY29yZFJlYWN0aW9uQXNDb21taXR0ZWQgfSBmcm9tIFwiLi91dGlscy9yZWFjdGlvbkNsZWFudXBUcmFja2luZ1wiO1xuaW1wb3J0IHsgaXNVc2luZ1N0YXRpY1JlbmRlcmluZyB9IGZyb20gXCIuL3N0YXRpY1JlbmRlcmluZ1wiO1xuZnVuY3Rpb24gb2JzZXJ2ZXJDb21wb25lbnROYW1lRm9yKGJhc2VDb21wb25lbnROYW1lKSB7XG4gICAgcmV0dXJuIFwib2JzZXJ2ZXJcIiArIGJhc2VDb21wb25lbnROYW1lO1xufVxuLyoqXG4gKiBXZSB1c2UgY2xhc3MgdG8gbWFrZSBpdCBlYXNpZXIgdG8gZGV0ZWN0IGluIGhlYXAgc25hcHNob3RzIGJ5IG5hbWVcbiAqL1xudmFyIE9iamVjdFRvQmVSZXRhaW5lZEJ5UmVhY3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JqZWN0VG9CZVJldGFpbmVkQnlSZWFjdCgpIHtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdFRvQmVSZXRhaW5lZEJ5UmVhY3Q7XG59KCkpO1xuZnVuY3Rpb24gb2JqZWN0VG9CZVJldGFpbmVkQnlSZWFjdEZhY3RvcnkoKSB7XG4gICAgcmV0dXJuIG5ldyBPYmplY3RUb0JlUmV0YWluZWRCeVJlYWN0KCk7XG59XG5leHBvcnQgZnVuY3Rpb24gdXNlT2JzZXJ2ZXIoZm4sIGJhc2VDb21wb25lbnROYW1lKSB7XG4gICAgaWYgKGJhc2VDb21wb25lbnROYW1lID09PSB2b2lkIDApIHsgYmFzZUNvbXBvbmVudE5hbWUgPSBcIm9ic2VydmVkXCI7IH1cbiAgICBpZiAoaXNVc2luZ1N0YXRpY1JlbmRlcmluZygpKSB7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgIH1cbiAgICB2YXIgX2EgPSBfX3JlYWQoUmVhY3QudXNlU3RhdGUob2JqZWN0VG9CZVJldGFpbmVkQnlSZWFjdEZhY3RvcnkpLCAxKSwgb2JqZWN0UmV0YWluZWRCeVJlYWN0ID0gX2FbMF07XG4gICAgLy8gRm9yY2UgdXBkYXRlLCBzZWUgIzI5ODJcbiAgICB2YXIgX2IgPSBfX3JlYWQoUmVhY3QudXNlU3RhdGUoKSwgMiksIHNldFN0YXRlID0gX2JbMV07XG4gICAgdmFyIGZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gc2V0U3RhdGUoW10pOyB9O1xuICAgIC8vIFN0cmljdE1vZGUvQ29uY3VycmVudE1vZGUvU3VzcGVuc2UgbWF5IG1lYW4gdGhhdCBvdXIgY29tcG9uZW50IGlzXG4gICAgLy8gcmVuZGVyZWQgYW5kIGFiYW5kb25lZCBtdWx0aXBsZSB0aW1lcywgc28gd2UgbmVlZCB0byB0cmFjayBsZWFrZWRcbiAgICAvLyBSZWFjdGlvbnMuXG4gICAgdmFyIHJlYWN0aW9uVHJhY2tpbmdSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gICAgaWYgKCFyZWFjdGlvblRyYWNraW5nUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgLy8gRmlyc3QgcmVuZGVyIGZvciB0aGlzIGNvbXBvbmVudCAob3IgZmlyc3QgdGltZSBzaW5jZSBhIHByZXZpb3VzXG4gICAgICAgIC8vIHJlYWN0aW9uIGZyb20gYW4gYWJhbmRvbmVkIHJlbmRlciB3YXMgZGlzcG9zZWQpLlxuICAgICAgICB2YXIgbmV3UmVhY3Rpb24gPSBuZXcgUmVhY3Rpb24ob2JzZXJ2ZXJDb21wb25lbnROYW1lRm9yKGJhc2VDb21wb25lbnROYW1lKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gT2JzZXJ2YWJsZSBoYXMgY2hhbmdlZCwgbWVhbmluZyB3ZSB3YW50IHRvIHJlLXJlbmRlclxuICAgICAgICAgICAgLy8gQlVUIGlmIHdlJ3JlIGEgY29tcG9uZW50IHRoYXQgaGFzbid0IHlldCBnb3QgdG8gdGhlIHVzZUVmZmVjdCgpXG4gICAgICAgICAgICAvLyBzdGFnZSwgd2UgbWlnaHQgYmUgYSBjb21wb25lbnQgdGhhdCBfc3RhcnRlZF8gdG8gcmVuZGVyLCBidXRcbiAgICAgICAgICAgIC8vIGdvdCBkcm9wcGVkLCBhbmQgd2UgZG9uJ3Qgd2FudCB0byBtYWtlIHN0YXRlIGNoYW5nZXMgdGhlbi5cbiAgICAgICAgICAgIC8vIChJdCB0cmlnZ2VycyB3YXJuaW5ncyBpbiBTdHJpY3RNb2RlLCBmb3IgYSBzdGFydC4pXG4gICAgICAgICAgICBpZiAodHJhY2tpbmdEYXRhXzEubW91bnRlZCkge1xuICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgcmVhY2hlZCB1c2VFZmZlY3QoKSwgc28gd2UncmUgbW91bnRlZCwgYW5kIGNhbiB0cmlnZ2VyIGFuIHVwZGF0ZVxuICAgICAgICAgICAgICAgIGZvcmNlVXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlbid0IHlldCByZWFjaGVkIHVzZUVmZmVjdCgpLCBzbyB3ZSdsbCBuZWVkIHRvIHRyaWdnZXIgYSByZS1yZW5kZXJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIChhbmQgaWYpIHVzZUVmZmVjdCgpIGFycml2ZXMuXG4gICAgICAgICAgICAgICAgdHJhY2tpbmdEYXRhXzEuY2hhbmdlZEJlZm9yZU1vdW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB0cmFja2luZ0RhdGFfMSA9IGFkZFJlYWN0aW9uVG9UcmFjayhyZWFjdGlvblRyYWNraW5nUmVmLCBuZXdSZWFjdGlvbiwgb2JqZWN0UmV0YWluZWRCeVJlYWN0KTtcbiAgICB9XG4gICAgdmFyIHJlYWN0aW9uID0gcmVhY3Rpb25UcmFja2luZ1JlZi5jdXJyZW50LnJlYWN0aW9uO1xuICAgIFJlYWN0LnVzZURlYnVnVmFsdWUocmVhY3Rpb24sIHByaW50RGVidWdWYWx1ZSk7XG4gICAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gQ2FsbGVkIG9uIGZpcnN0IG1vdW50IG9ubHlcbiAgICAgICAgcmVjb3JkUmVhY3Rpb25Bc0NvbW1pdHRlZChyZWFjdGlvblRyYWNraW5nUmVmKTtcbiAgICAgICAgaWYgKHJlYWN0aW9uVHJhY2tpbmdSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgLy8gR3JlYXQuIFdlJ3ZlIGFscmVhZHkgZ290IG91ciByZWFjdGlvbiBmcm9tIG91ciByZW5kZXI7XG4gICAgICAgICAgICAvLyBhbGwgd2UgbmVlZCB0byBkbyBpcyB0byByZWNvcmQgdGhhdCBpdCdzIG5vdyBtb3VudGVkLFxuICAgICAgICAgICAgLy8gdG8gYWxsb3cgZnV0dXJlIG9ic2VydmFibGUgY2hhbmdlcyB0byB0cmlnZ2VyIHJlLXJlbmRlcnNcbiAgICAgICAgICAgIHJlYWN0aW9uVHJhY2tpbmdSZWYuY3VycmVudC5tb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIEdvdCBhIGNoYW5nZSBiZWZvcmUgZmlyc3QgbW91bnQsIGZvcmNlIGFuIHVwZGF0ZVxuICAgICAgICAgICAgaWYgKHJlYWN0aW9uVHJhY2tpbmdSZWYuY3VycmVudC5jaGFuZ2VkQmVmb3JlTW91bnQpIHtcbiAgICAgICAgICAgICAgICByZWFjdGlvblRyYWNraW5nUmVmLmN1cnJlbnQuY2hhbmdlZEJlZm9yZU1vdW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRoZSByZWFjdGlvbiB3ZSBzZXQgdXAgaW4gb3VyIHJlbmRlciBoYXMgYmVlbiBkaXNwb3NlZC5cbiAgICAgICAgICAgIC8vIFRoaXMgY2FuIGJlIGR1ZSB0byBiYWQgdGltaW5ncyBvZiByZW5kZXJpbmdzLCBlLmcuIG91clxuICAgICAgICAgICAgLy8gY29tcG9uZW50IHdhcyBwYXVzZWQgZm9yIGEgX3ZlcnlfIGxvbmcgdGltZSwgYW5kIG91clxuICAgICAgICAgICAgLy8gcmVhY3Rpb24gZ290IGNsZWFuZWQgdXBcbiAgICAgICAgICAgIC8vIFJlLWNyZWF0ZSB0aGUgcmVhY3Rpb25cbiAgICAgICAgICAgIHJlYWN0aW9uVHJhY2tpbmdSZWYuY3VycmVudCA9IHtcbiAgICAgICAgICAgICAgICByZWFjdGlvbjogbmV3IFJlYWN0aW9uKG9ic2VydmVyQ29tcG9uZW50TmFtZUZvcihiYXNlQ29tcG9uZW50TmFtZSksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UndmUgZGVmaW5pdGVseSBhbHJlYWR5IGJlZW4gbW91bnRlZCBhdCB0aGlzIHBvaW50XG4gICAgICAgICAgICAgICAgICAgIGZvcmNlVXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbW91bnRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjaGFuZ2VkQmVmb3JlTW91bnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNsZWFuQXQ6IEluZmluaXR5XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVhY3Rpb25UcmFja2luZ1JlZi5jdXJyZW50LnJlYWN0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHJlYWN0aW9uVHJhY2tpbmdSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgIH07XG4gICAgfSwgW10pO1xuICAgIC8vIHJlbmRlciB0aGUgb3JpZ2luYWwgY29tcG9uZW50LCBidXQgaGF2ZSB0aGVcbiAgICAvLyByZWFjdGlvbiB0cmFjayB0aGUgb2JzZXJ2YWJsZXMsIHNvIHRoYXQgcmVuZGVyaW5nXG4gICAgLy8gY2FuIGJlIGludmFsaWRhdGVkIChzZWUgYWJvdmUpIG9uY2UgYSBkZXBlbmRlbmN5IGNoYW5nZXNcbiAgICB2YXIgcmVuZGVyaW5nO1xuICAgIHZhciBleGNlcHRpb247XG4gICAgcmVhY3Rpb24udHJhY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVuZGVyaW5nID0gZm4oKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZXhjZXB0aW9uID0gZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChleGNlcHRpb24pIHtcbiAgICAgICAgdGhyb3cgZXhjZXB0aW9uOyAvLyByZS10aHJvdyBhbnkgZXhjZXB0aW9ucyBjYXVnaHQgZHVyaW5nIHJlbmRlcmluZ1xuICAgIH1cbiAgICByZXR1cm4gcmVuZGVyaW5nO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNlT2JzZXJ2ZXIuanMubWFwIiwidmFyIEZpbmFsaXphdGlvblJlZ2lzdHJ5TG9jYWwgPSB0eXBlb2YgRmluYWxpemF0aW9uUmVnaXN0cnkgPT09IFwidW5kZWZpbmVkXCIgPyB1bmRlZmluZWQgOiBGaW5hbGl6YXRpb25SZWdpc3RyeTtcbmV4cG9ydCB7IEZpbmFsaXphdGlvblJlZ2lzdHJ5TG9jYWwgYXMgRmluYWxpemF0aW9uUmVnaXN0cnkgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZpbmFsaXphdGlvblJlZ2lzdHJ5V3JhcHBlci5qcy5tYXAiLCJpbXBvcnQgeyBtYWtlT2JzZXJ2YWJsZSB9IGZyb20gXCJtb2J4XCI7XG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaWYgKCF1c2VTdGF0ZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIm1vYngtcmVhY3QtbGl0ZSByZXF1aXJlcyBSZWFjdCB3aXRoIEhvb2tzIHN1cHBvcnRcIik7XG59XG5pZiAoIW1ha2VPYnNlcnZhYmxlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwibW9ieC1yZWFjdC1saXRlQDMgcmVxdWlyZXMgbW9ieCBhdCBsZWFzdCB2ZXJzaW9uIDYgdG8gYmUgYXZhaWxhYmxlXCIpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXNzZXJ0RW52aXJvbm1lbnQuanMubWFwIiwiaW1wb3J0IHsgY3JlYXRlVHJhY2tpbmdEYXRhIH0gZnJvbSBcIi4vcmVhY3Rpb25DbGVhbnVwVHJhY2tpbmdDb21tb25cIjtcbi8qKlxuICogRmluYWxpemF0aW9uUmVnaXN0cnktYmFzZWQgdW5jb21taXR0ZWQgcmVhY3Rpb24gY2xlYW51cFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVhY3Rpb25DbGVhbnVwVHJhY2tpbmdVc2luZ0ZpbmFsaXphdGlvblJlZ2lzdGVyKEZpbmFsaXphdGlvblJlZ2lzdHJ5KSB7XG4gICAgdmFyIGNsZWFudXBUb2tlblRvUmVhY3Rpb25UcmFja2luZ01hcCA9IG5ldyBNYXAoKTtcbiAgICB2YXIgZ2xvYmFsQ2xlYW51cFRva2Vuc0NvdW50ZXIgPSAxO1xuICAgIHZhciByZWdpc3RyeSA9IG5ldyBGaW5hbGl6YXRpb25SZWdpc3RyeShmdW5jdGlvbiBjbGVhbnVwRnVuY3Rpb24odG9rZW4pIHtcbiAgICAgICAgdmFyIHRyYWNrZWRSZWFjdGlvbiA9IGNsZWFudXBUb2tlblRvUmVhY3Rpb25UcmFja2luZ01hcC5nZXQodG9rZW4pO1xuICAgICAgICBpZiAodHJhY2tlZFJlYWN0aW9uKSB7XG4gICAgICAgICAgICB0cmFja2VkUmVhY3Rpb24ucmVhY3Rpb24uZGlzcG9zZSgpO1xuICAgICAgICAgICAgY2xlYW51cFRva2VuVG9SZWFjdGlvblRyYWNraW5nTWFwLmRlbGV0ZSh0b2tlbik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhZGRSZWFjdGlvblRvVHJhY2s6IGZ1bmN0aW9uIChyZWFjdGlvblRyYWNraW5nUmVmLCByZWFjdGlvbiwgb2JqZWN0UmV0YWluZWRCeVJlYWN0KSB7XG4gICAgICAgICAgICB2YXIgdG9rZW4gPSBnbG9iYWxDbGVhbnVwVG9rZW5zQ291bnRlcisrO1xuICAgICAgICAgICAgcmVnaXN0cnkucmVnaXN0ZXIob2JqZWN0UmV0YWluZWRCeVJlYWN0LCB0b2tlbiwgcmVhY3Rpb25UcmFja2luZ1JlZik7XG4gICAgICAgICAgICByZWFjdGlvblRyYWNraW5nUmVmLmN1cnJlbnQgPSBjcmVhdGVUcmFja2luZ0RhdGEocmVhY3Rpb24pO1xuICAgICAgICAgICAgcmVhY3Rpb25UcmFja2luZ1JlZi5jdXJyZW50LmZpbmFsaXphdGlvblJlZ2lzdHJ5Q2xlYW51cFRva2VuID0gdG9rZW47XG4gICAgICAgICAgICBjbGVhbnVwVG9rZW5Ub1JlYWN0aW9uVHJhY2tpbmdNYXAuc2V0KHRva2VuLCByZWFjdGlvblRyYWNraW5nUmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHJlYWN0aW9uVHJhY2tpbmdSZWYuY3VycmVudDtcbiAgICAgICAgfSxcbiAgICAgICAgcmVjb3JkUmVhY3Rpb25Bc0NvbW1pdHRlZDogZnVuY3Rpb24gKHJlYWN0aW9uUmVmKSB7XG4gICAgICAgICAgICByZWdpc3RyeS51bnJlZ2lzdGVyKHJlYWN0aW9uUmVmKTtcbiAgICAgICAgICAgIGlmIChyZWFjdGlvblJlZi5jdXJyZW50ICYmIHJlYWN0aW9uUmVmLmN1cnJlbnQuZmluYWxpemF0aW9uUmVnaXN0cnlDbGVhbnVwVG9rZW4pIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwVG9rZW5Ub1JlYWN0aW9uVHJhY2tpbmdNYXAuZGVsZXRlKHJlYWN0aW9uUmVmLmN1cnJlbnQuZmluYWxpemF0aW9uUmVnaXN0cnlDbGVhbnVwVG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBmb3JjZUNsZWFudXBUaW1lclRvUnVuTm93Rm9yVGVzdHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFdoZW4gRmluYWxpemF0aW9uUmVnaXN0cnkgaW4gdXNlLCB0aGlzIHRoaXMgaXMgbm8tb3BcbiAgICAgICAgfSxcbiAgICAgICAgcmVzZXRDbGVhbnVwU2NoZWR1bGVGb3JUZXN0czogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gV2hlbiBGaW5hbGl6YXRpb25SZWdpc3RyeSBpbiB1c2UsIHRoaXMgdGhpcyBpcyBuby1vcFxuICAgICAgICB9XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZVJlYWN0aW9uQ2xlYW51cFRyYWNraW5nVXNpbmdGaW5hbGl6YXRpb25SZWdpc3Rlci5qcy5tYXAiLCJ2YXIgX192YWx1ZXMgPSAodGhpcyAmJiB0aGlzLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7XG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbn07XG5pbXBvcnQgeyBDTEVBTlVQX1RJTUVSX0xPT1BfTUlMTElTLCBjcmVhdGVUcmFja2luZ0RhdGEgfSBmcm9tIFwiLi9yZWFjdGlvbkNsZWFudXBUcmFja2luZ0NvbW1vblwiO1xuLyoqXG4gKiB0aW1lcnMsIGdjLXN0eWxlLCB1bmNvbW1pdHRlZCByZWFjdGlvbiBjbGVhbnVwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUaW1lckJhc2VkUmVhY3Rpb25DbGVhbnVwVHJhY2tpbmcoKSB7XG4gICAgLyoqXG4gICAgICogUmVhY3Rpb25zIGNyZWF0ZWQgYnkgY29tcG9uZW50cyB0aGF0IGhhdmUgeWV0IHRvIGJlIGZ1bGx5IG1vdW50ZWQuXG4gICAgICovXG4gICAgdmFyIHVuY29tbWl0dGVkUmVhY3Rpb25SZWZzID0gbmV3IFNldCgpO1xuICAgIC8qKlxuICAgICAqIExhdGVzdCAndW5jb21taXR0ZWQgcmVhY3Rpb25zJyBjbGVhbnVwIHRpbWVyIGhhbmRsZS5cbiAgICAgKi9cbiAgICB2YXIgcmVhY3Rpb25DbGVhbnVwSGFuZGxlO1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgLyoqXG4gICAgICogT25seSB0byBiZSB1c2VkIGJ5IHRlc3QgZnVuY3Rpb25zOyBkbyBub3QgZXhwb3J0IG91dHNpZGUgb2YgbW9ieC1yZWFjdC1saXRlXG4gICAgICovXG4gICAgZnVuY3Rpb24gZm9yY2VDbGVhbnVwVGltZXJUb1J1bk5vd0ZvclRlc3RzKCkge1xuICAgICAgICAvLyBUaGlzIGFsbG93cyB1cyB0byBjb250cm9sIHRoZSBleGVjdXRpb24gb2YgdGhlIGNsZWFudXAgdGltZXJcbiAgICAgICAgLy8gdG8gZm9yY2UgaXQgdG8gcnVuIGF0IGF3a3dhcmQgdGltZXMgaW4gdW5pdCB0ZXN0cy5cbiAgICAgICAgaWYgKHJlYWN0aW9uQ2xlYW51cEhhbmRsZSkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHJlYWN0aW9uQ2xlYW51cEhhbmRsZSk7XG4gICAgICAgICAgICBjbGVhblVuY29tbWl0dGVkUmVhY3Rpb25zKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBmdW5jdGlvbiByZXNldENsZWFudXBTY2hlZHVsZUZvclRlc3RzKCkge1xuICAgICAgICB2YXIgZV8xLCBfYTtcbiAgICAgICAgaWYgKHVuY29tbWl0dGVkUmVhY3Rpb25SZWZzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHVuY29tbWl0dGVkUmVhY3Rpb25SZWZzXzEgPSBfX3ZhbHVlcyh1bmNvbW1pdHRlZFJlYWN0aW9uUmVmcyksIHVuY29tbWl0dGVkUmVhY3Rpb25SZWZzXzFfMSA9IHVuY29tbWl0dGVkUmVhY3Rpb25SZWZzXzEubmV4dCgpOyAhdW5jb21taXR0ZWRSZWFjdGlvblJlZnNfMV8xLmRvbmU7IHVuY29tbWl0dGVkUmVhY3Rpb25SZWZzXzFfMSA9IHVuY29tbWl0dGVkUmVhY3Rpb25SZWZzXzEubmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWYgPSB1bmNvbW1pdHRlZFJlYWN0aW9uUmVmc18xXzEudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFja2luZyA9IHJlZi5jdXJyZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNraW5nLnJlYWN0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodW5jb21taXR0ZWRSZWFjdGlvblJlZnNfMV8xICYmICF1bmNvbW1pdHRlZFJlYWN0aW9uUmVmc18xXzEuZG9uZSAmJiAoX2EgPSB1bmNvbW1pdHRlZFJlYWN0aW9uUmVmc18xLnJldHVybikpIF9hLmNhbGwodW5jb21taXR0ZWRSZWFjdGlvblJlZnNfMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVuY29tbWl0dGVkUmVhY3Rpb25SZWZzLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlYWN0aW9uQ2xlYW51cEhhbmRsZSkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHJlYWN0aW9uQ2xlYW51cEhhbmRsZSk7XG4gICAgICAgICAgICByZWFjdGlvbkNsZWFudXBIYW5kbGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZW5zdXJlQ2xlYW51cFRpbWVyUnVubmluZygpIHtcbiAgICAgICAgaWYgKHJlYWN0aW9uQ2xlYW51cEhhbmRsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZWFjdGlvbkNsZWFudXBIYW5kbGUgPSBzZXRUaW1lb3V0KGNsZWFuVW5jb21taXR0ZWRSZWFjdGlvbnMsIENMRUFOVVBfVElNRVJfTE9PUF9NSUxMSVMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlQ2xlYW51cE9mUmVhY3Rpb25JZkxlYWtlZChyZWYpIHtcbiAgICAgICAgdW5jb21taXR0ZWRSZWFjdGlvblJlZnMuYWRkKHJlZik7XG4gICAgICAgIGVuc3VyZUNsZWFudXBUaW1lclJ1bm5pbmcoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVjb3JkUmVhY3Rpb25Bc0NvbW1pdHRlZChyZWFjdGlvblJlZikge1xuICAgICAgICB1bmNvbW1pdHRlZFJlYWN0aW9uUmVmcy5kZWxldGUocmVhY3Rpb25SZWYpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW4gYnkgdGhlIGNsZWFudXAgdGltZXIgdG8gZGlzcG9zZSBhbnkgb3V0c3RhbmRpbmcgcmVhY3Rpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2xlYW5VbmNvbW1pdHRlZFJlYWN0aW9ucygpIHtcbiAgICAgICAgcmVhY3Rpb25DbGVhbnVwSGFuZGxlID0gdW5kZWZpbmVkO1xuICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBjYW5kaWRhdGUgbGVha2VkIHJlYWN0aW9uczsgdGhvc2Ugb2xkZXJcbiAgICAgICAgLy8gdGhhbiBDTEVBTlVQX0xFQUtFRF9SRUFDVElPTlNfQUZURVJfTUlMTElTIGdldCB0aWRpZWQuXG4gICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICB1bmNvbW1pdHRlZFJlYWN0aW9uUmVmcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHtcbiAgICAgICAgICAgIHZhciB0cmFja2luZyA9IHJlZi5jdXJyZW50O1xuICAgICAgICAgICAgaWYgKHRyYWNraW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSB0cmFja2luZy5jbGVhbkF0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEl0J3MgdGltZSB0byB0aWR5IHVwIHRoaXMgbGVha2VkIHJlYWN0aW9uLlxuICAgICAgICAgICAgICAgICAgICB0cmFja2luZy5yZWFjdGlvbi5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdW5jb21taXR0ZWRSZWFjdGlvblJlZnMuZGVsZXRlKHJlZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHVuY29tbWl0dGVkUmVhY3Rpb25SZWZzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAvLyBXZSd2ZSBqdXN0IGZpbmlzaGVkIGEgcm91bmQgb2YgY2xlYW51cHMgYnV0IHRoZXJlIGFyZSBzdGlsbFxuICAgICAgICAgICAgLy8gc29tZSBsZWFrIGNhbmRpZGF0ZXMgb3V0c3RhbmRpbmcuXG4gICAgICAgICAgICBlbnN1cmVDbGVhbnVwVGltZXJSdW5uaW5nKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkUmVhY3Rpb25Ub1RyYWNrOiBmdW5jdGlvbiAocmVhY3Rpb25UcmFja2luZ1JlZiwgcmVhY3Rpb24sIFxuICAgICAgICAvKipcbiAgICAgICAgICogT24gdGltZXIgYmFzZWQgaW1wbGVtZW50YXRpb24gd2UgZG9uJ3QgcmVhbGx5IG5lZWQgdGhpcyBvYmplY3QsXG4gICAgICAgICAqIGJ1dCB3ZSBrZWVwIHRoZSBzYW1lIGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgb2JqZWN0UmV0YWluZWRCeVJlYWN0KSB7XG4gICAgICAgICAgICByZWFjdGlvblRyYWNraW5nUmVmLmN1cnJlbnQgPSBjcmVhdGVUcmFja2luZ0RhdGEocmVhY3Rpb24pO1xuICAgICAgICAgICAgc2NoZWR1bGVDbGVhbnVwT2ZSZWFjdGlvbklmTGVha2VkKHJlYWN0aW9uVHJhY2tpbmdSZWYpO1xuICAgICAgICAgICAgcmV0dXJuIHJlYWN0aW9uVHJhY2tpbmdSZWYuY3VycmVudDtcbiAgICAgICAgfSxcbiAgICAgICAgcmVjb3JkUmVhY3Rpb25Bc0NvbW1pdHRlZDogcmVjb3JkUmVhY3Rpb25Bc0NvbW1pdHRlZCxcbiAgICAgICAgZm9yY2VDbGVhbnVwVGltZXJUb1J1bk5vd0ZvclRlc3RzOiBmb3JjZUNsZWFudXBUaW1lclRvUnVuTm93Rm9yVGVzdHMsXG4gICAgICAgIHJlc2V0Q2xlYW51cFNjaGVkdWxlRm9yVGVzdHM6IHJlc2V0Q2xlYW51cFNjaGVkdWxlRm9yVGVzdHNcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlVGltZXJCYXNlZFJlYWN0aW9uQ2xlYW51cFRyYWNraW5nLmpzLm1hcCIsImltcG9ydCB7IGNvbmZpZ3VyZSB9IGZyb20gXCJtb2J4XCI7XG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdE5vb3BCYXRjaChjYWxsYmFjaykge1xuICAgIGNhbGxiYWNrKCk7XG59XG5leHBvcnQgZnVuY3Rpb24gb2JzZXJ2ZXJCYXRjaGluZyhyZWFjdGlvblNjaGVkdWxlcikge1xuICAgIGlmICghcmVhY3Rpb25TY2hlZHVsZXIpIHtcbiAgICAgICAgcmVhY3Rpb25TY2hlZHVsZXIgPSBkZWZhdWx0Tm9vcEJhdGNoO1xuICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJbTW9iWF0gRmFpbGVkIHRvIGdldCB1bnN0YWJsZV9iYXRjaGVkIHVwZGF0ZXMgZnJvbSByZWFjdC1kb20gLyByZWFjdC1uYXRpdmVcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uZmlndXJlKHsgcmVhY3Rpb25TY2hlZHVsZXI6IHJlYWN0aW9uU2NoZWR1bGVyIH0pO1xufVxuZXhwb3J0IHZhciBpc09ic2VydmVyQmF0Y2hlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIltNb2JYXSBEZXByZWNhdGVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZlckJhdGNoaW5nLmpzLm1hcCIsImltcG9ydCB7IGdldERlcGVuZGVuY3lUcmVlIH0gZnJvbSBcIm1vYnhcIjtcbmV4cG9ydCBmdW5jdGlvbiBwcmludERlYnVnVmFsdWUodikge1xuICAgIHJldHVybiBnZXREZXBlbmRlbmN5VHJlZSh2KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByaW50RGVidWdWYWx1ZS5qcy5tYXAiLCJpbXBvcnQgeyBGaW5hbGl6YXRpb25SZWdpc3RyeSBhcyBGaW5hbGl6YXRpb25SZWdpc3RyeU1heWJlVW5kZWZpbmVkIH0gZnJvbSBcIi4vRmluYWxpemF0aW9uUmVnaXN0cnlXcmFwcGVyXCI7XG5pbXBvcnQgeyBjcmVhdGVSZWFjdGlvbkNsZWFudXBUcmFja2luZ1VzaW5nRmluYWxpemF0aW9uUmVnaXN0ZXIgfSBmcm9tIFwiLi9jcmVhdGVSZWFjdGlvbkNsZWFudXBUcmFja2luZ1VzaW5nRmluYWxpemF0aW9uUmVnaXN0ZXJcIjtcbmltcG9ydCB7IGNyZWF0ZVRpbWVyQmFzZWRSZWFjdGlvbkNsZWFudXBUcmFja2luZyB9IGZyb20gXCIuL2NyZWF0ZVRpbWVyQmFzZWRSZWFjdGlvbkNsZWFudXBUcmFja2luZ1wiO1xudmFyIF9hID0gRmluYWxpemF0aW9uUmVnaXN0cnlNYXliZVVuZGVmaW5lZFxuICAgID8gY3JlYXRlUmVhY3Rpb25DbGVhbnVwVHJhY2tpbmdVc2luZ0ZpbmFsaXphdGlvblJlZ2lzdGVyKEZpbmFsaXphdGlvblJlZ2lzdHJ5TWF5YmVVbmRlZmluZWQpXG4gICAgOiBjcmVhdGVUaW1lckJhc2VkUmVhY3Rpb25DbGVhbnVwVHJhY2tpbmcoKSwgYWRkUmVhY3Rpb25Ub1RyYWNrID0gX2EuYWRkUmVhY3Rpb25Ub1RyYWNrLCByZWNvcmRSZWFjdGlvbkFzQ29tbWl0dGVkID0gX2EucmVjb3JkUmVhY3Rpb25Bc0NvbW1pdHRlZCwgcmVzZXRDbGVhbnVwU2NoZWR1bGVGb3JUZXN0cyA9IF9hLnJlc2V0Q2xlYW51cFNjaGVkdWxlRm9yVGVzdHMsIGZvcmNlQ2xlYW51cFRpbWVyVG9SdW5Ob3dGb3JUZXN0cyA9IF9hLmZvcmNlQ2xlYW51cFRpbWVyVG9SdW5Ob3dGb3JUZXN0cztcbmV4cG9ydCB7IGFkZFJlYWN0aW9uVG9UcmFjaywgcmVjb3JkUmVhY3Rpb25Bc0NvbW1pdHRlZCwgcmVzZXRDbGVhbnVwU2NoZWR1bGVGb3JUZXN0cywgZm9yY2VDbGVhbnVwVGltZXJUb1J1bk5vd0ZvclRlc3RzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFjdGlvbkNsZWFudXBUcmFja2luZy5qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhY2tpbmdEYXRhKHJlYWN0aW9uKSB7XG4gICAgdmFyIHRyYWNraW5nRGF0YSA9IHtcbiAgICAgICAgcmVhY3Rpb246IHJlYWN0aW9uLFxuICAgICAgICBtb3VudGVkOiBmYWxzZSxcbiAgICAgICAgY2hhbmdlZEJlZm9yZU1vdW50OiBmYWxzZSxcbiAgICAgICAgY2xlYW5BdDogRGF0ZS5ub3coKSArIENMRUFOVVBfTEVBS0VEX1JFQUNUSU9OU19BRlRFUl9NSUxMSVNcbiAgICB9O1xuICAgIHJldHVybiB0cmFja2luZ0RhdGE7XG59XG4vKipcbiAqIFRoZSBtaW5pbXVtIHRpbWUgYmVmb3JlIHdlJ2xsIGNsZWFuIHVwIGEgUmVhY3Rpb24gY3JlYXRlZCBpbiBhIHJlbmRlclxuICogZm9yIGEgY29tcG9uZW50IHRoYXQgaGFzbid0IG1hbmFnZWQgdG8gcnVuIGl0cyBlZmZlY3RzLiBUaGlzIG5lZWRzIHRvXG4gKiBiZSBiaWcgZW5vdWdoIHRvIGVuc3VyZSB0aGF0IGEgY29tcG9uZW50IHdvbid0IHR1cm4gdXAgYW5kIGhhdmUgaXRzXG4gKiBlZmZlY3RzIHJ1biB3aXRob3V0IGJlaW5nIHJlLXJlbmRlcmVkLlxuICovXG5leHBvcnQgdmFyIENMRUFOVVBfTEVBS0VEX1JFQUNUSU9OU19BRlRFUl9NSUxMSVMgPSAxMDAwMDtcbi8qKlxuICogVGhlIGZyZXF1ZW5jeSB3aXRoIHdoaWNoIHdlJ2xsIGNoZWNrIGZvciBsZWFrZWQgcmVhY3Rpb25zLlxuICovXG5leHBvcnQgdmFyIENMRUFOVVBfVElNRVJfTE9PUF9NSUxMSVMgPSAxMDAwMDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWN0aW9uQ2xlYW51cFRyYWNraW5nQ29tbW9uLmpzLm1hcCIsInZhciBkZXByZWNhdGVkTWVzc2FnZXMgPSBbXTtcbmV4cG9ydCBmdW5jdGlvbiB1c2VEZXByZWNhdGVkKG1zZykge1xuICAgIGlmICghZGVwcmVjYXRlZE1lc3NhZ2VzLmluY2x1ZGVzKG1zZykpIHtcbiAgICAgICAgZGVwcmVjYXRlZE1lc3NhZ2VzLnB1c2gobXNnKTtcbiAgICAgICAgY29uc29sZS53YXJuKG1zZyk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIl0sIm5hbWVzIjpbIk9ic2VydmVyQ29tcG9uZW50IiwiX2EiLCJjaGlsZHJlbiIsInJlbmRlciIsImNvbXBvbmVudCIsInVzZU9ic2VydmVyIiwiT2JzZXJ2ZXJQcm9wc0NoZWNrIiwicHJvcHMiLCJrZXkiLCJjb21wb25lbnROYW1lIiwibG9jYXRpb24iLCJwcm9wRnVsbE5hbWUiLCJleHRyYUtleSIsImhhc1Byb3AiLCJoYXNFeHRyYVByb3AiLCJFcnJvciIsInByb3BUeXBlcyIsImRpc3BsYXlOYW1lIiwiZm4iLCJiYXNlQ29tcG9uZW50TmFtZSIsInVzZURlcHJlY2F0ZWQiLCJ1c2VTdGF0aWNSZW5kZXJpbmciLCJlbmFibGUiLCJjb25zb2xlIiwid2FybiIsImVuYWJsZVN0YXRpY1JlbmRlcmluZyIsIm9ic2VydmVyQmF0Y2hpbmciLCJfX2Fzc2lnbiIsIk9iamVjdCIsImFzc2lnbiIsInQiLCJzIiwiaSIsIm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiYXBwbHkiLCJ0aGlzIiwib2JzZXJ2ZXIiLCJiYXNlQ29tcG9uZW50Iiwib3B0aW9ucyIsImlzVXNpbmdTdGF0aWNSZW5kZXJpbmciLCJtZW1vQ29tcG9uZW50IiwiYmFzZSIsInRhcmdldCIsInJlYWxPcHRpb25zIiwiZm9yd2FyZFJlZiIsIm5hbWUiLCJ3cmFwcGVkQ29tcG9uZW50IiwicmVmIiwibWVtbyIsImtleXMiLCJmb3JFYWNoIiwiaG9pc3RCbGFja0xpc3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIiQkdHlwZW9mIiwiY29tcGFyZSIsInR5cGUiLCJnbG9iYWxJc1VzaW5nU3RhdGljUmVuZGVyaW5nIiwiX19yZWFkIiwibyIsIm0iLCJTeW1ib2wiLCJpdGVyYXRvciIsInIiLCJlIiwiYXIiLCJuZXh0IiwiZG9uZSIsInB1c2giLCJ2YWx1ZSIsImVycm9yIiwidXNlQXNPYnNlcnZhYmxlU291cmNlIiwiY3VycmVudCIsInJlcyIsInVzZVN0YXRlIiwib2JzZXJ2YWJsZSIsImRlZXAiLCJydW5JbkFjdGlvbiIsInVzZUxvY2FsT2JzZXJ2YWJsZSIsImluaXRpYWxpemVyIiwiYW5ub3RhdGlvbnMiLCJhdXRvQmluZCIsInVzZUxvY2FsU3RvcmUiLCJzb3VyY2UiLCJ1bmRlZmluZWQiLCJvYnNlcnZlckNvbXBvbmVudE5hbWVGb3IiLCJPYmplY3RUb0JlUmV0YWluZWRCeVJlYWN0Iiwib2JqZWN0VG9CZVJldGFpbmVkQnlSZWFjdEZhY3RvcnkiLCJvYmplY3RSZXRhaW5lZEJ5UmVhY3QiLCJzZXRTdGF0ZSIsImZvcmNlVXBkYXRlIiwicmVhY3Rpb25UcmFja2luZ1JlZiIsIm5ld1JlYWN0aW9uIiwiUmVhY3Rpb24iLCJ0cmFja2luZ0RhdGFfMSIsIm1vdW50ZWQiLCJjaGFuZ2VkQmVmb3JlTW91bnQiLCJhZGRSZWFjdGlvblRvVHJhY2siLCJyZW5kZXJpbmciLCJleGNlcHRpb24iLCJyZWFjdGlvbiIsInByaW50RGVidWdWYWx1ZSIsInJlY29yZFJlYWN0aW9uQXNDb21taXR0ZWQiLCJjbGVhbkF0IiwiSW5maW5pdHkiLCJkaXNwb3NlIiwidHJhY2siLCJGaW5hbGl6YXRpb25SZWdpc3RyeUxvY2FsIiwiRmluYWxpemF0aW9uUmVnaXN0cnkiLCJtYWtlT2JzZXJ2YWJsZSIsImNyZWF0ZVJlYWN0aW9uQ2xlYW51cFRyYWNraW5nVXNpbmdGaW5hbGl6YXRpb25SZWdpc3RlciIsImNsZWFudXBUb2tlblRvUmVhY3Rpb25UcmFja2luZ01hcCIsIk1hcCIsImdsb2JhbENsZWFudXBUb2tlbnNDb3VudGVyIiwicmVnaXN0cnkiLCJ0b2tlbiIsInRyYWNrZWRSZWFjdGlvbiIsImdldCIsImRlbGV0ZSIsInJlZ2lzdGVyIiwiY3JlYXRlVHJhY2tpbmdEYXRhIiwiZmluYWxpemF0aW9uUmVnaXN0cnlDbGVhbnVwVG9rZW4iLCJzZXQiLCJyZWFjdGlvblJlZiIsInVucmVnaXN0ZXIiLCJmb3JjZUNsZWFudXBUaW1lclRvUnVuTm93Rm9yVGVzdHMiLCJyZXNldENsZWFudXBTY2hlZHVsZUZvclRlc3RzIiwiX192YWx1ZXMiLCJUeXBlRXJyb3IiLCJjcmVhdGVUaW1lckJhc2VkUmVhY3Rpb25DbGVhbnVwVHJhY2tpbmciLCJyZWFjdGlvbkNsZWFudXBIYW5kbGUiLCJ1bmNvbW1pdHRlZFJlYWN0aW9uUmVmcyIsIlNldCIsImVuc3VyZUNsZWFudXBUaW1lclJ1bm5pbmciLCJzZXRUaW1lb3V0IiwiY2xlYW5VbmNvbW1pdHRlZFJlYWN0aW9ucyIsIkNMRUFOVVBfVElNRVJfTE9PUF9NSUxMSVMiLCJub3ciLCJEYXRlIiwidHJhY2tpbmciLCJzaXplIiwiYWRkIiwiY2xlYXJUaW1lb3V0IiwiZV8xIiwidW5jb21taXR0ZWRSZWFjdGlvblJlZnNfMSIsInVuY29tbWl0dGVkUmVhY3Rpb25SZWZzXzFfMSIsImVfMV8xIiwicmV0dXJuIiwiY2xlYXIiLCJkZWZhdWx0Tm9vcEJhdGNoIiwiY2FsbGJhY2siLCJyZWFjdGlvblNjaGVkdWxlciIsImNvbmZpZ3VyZSIsImlzT2JzZXJ2ZXJCYXRjaGVkIiwidiIsImdldERlcGVuZGVuY3lUcmVlIiwiQ0xFQU5VUF9MRUFLRURfUkVBQ1RJT05TX0FGVEVSX01JTExJUyIsImRlcHJlY2F0ZWRNZXNzYWdlcyIsIm1zZyIsImluY2x1ZGVzIl0sInNvdXJjZVJvb3QiOiIifQ==